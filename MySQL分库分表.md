# MySQL分库分表

## 为什么要分库分表

解决高请求量的办法

- 使用缓存，nosql
- 优化慢sql、索引、字段
- 读写分离
- 分库分表

## 分表分库的方法

- 垂直拆分
- 水平拆分

### 垂直

垂直分库：通过业务拆分

垂直分表：通过业务拆分、就是拆分列

特点：结构不一样、但又是通过某一个列关联、并集是全量数据

优点：业务逻辑清晰、数据维护简单、不同业务反正不同机器上。

缺点：单表数据量大，读写压力依然很大。

### 水平

通过一些列对数据进行分表。比如对id取模分表。

特点：结构一样，数据不一样。并级都是全量数据。

优点：提高性能，拆分数据而结构不变，对程序改造少。

缺点：数据扩容难度大。拆分规则难抽象。

## 分库分表的问题

#### 分布式事务

shardingsphere可以解决

#### 跨库JOIN查询

#### 分布式全局唯一id

雪花算法

#### 增加开发成本

### 开源框架

jdbc直连层

​	shardingsphere、tddl

proxy代理层

​	mycat、mysql-proxy

​	proxy层支持跨语言