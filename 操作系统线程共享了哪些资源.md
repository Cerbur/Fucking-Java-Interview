# 操作系统线程共享了哪些资源

## 线程上下文

所属线程的栈区、程序计数器、栈指针以及函数运行使用的寄存器是线程私有的。

以上这些信息有一个统一的名字，就是**线程上下文**

## 代码区

编译后的可执行机器指令。程序中的任何一个函数都可以放到线程中去执行，不存在某个函数只能被特定线程执行的情况。

## **数据区**

进程地址空间中的数据区，这里存放的就是所谓的全局变量。数据区中的全局变量有且仅有一个实例，所有的线程都可以访问到该全局变量。

## 堆区

我们在C/C++中用malloc或者new出来的数据就存放在这个区域，很显然，**只要知道变量的地址，也就是指针，任何一个线程都可以访问指针指向的数据**，因此堆区也是线程共享的属于进程的资源。

## **动态链接库**

原来如果一个程序是动态链接生成的，**那么其地址空间中有一部分包含的就是动态链接库**，否则程序就运行不起来了，这一部分的地址空间也是被所有线程所共享的。

## **文件**

如果程序在运行过程中打开了一些文件，那么进程地址空间中还保存有打开的文件信息，进程打开的文件也可以被所有的线程使用，这也属于线程间的共享资源。