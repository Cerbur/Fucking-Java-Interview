# MySQL的基础架构

![](https://raw.githubusercontent.com/Cerbur/pic/main/20210714172550.png)

MySQL 在后续版本中移除了查询缓存，如果在一个表中发生了更新的时候，这个表的查询缓存就会被清空。所以一般来说，不推荐使用查询缓存。

所有的存储引擎共用一个 Server 层。存储引擎提供书写结构给 Server 层。

连接器复制连接和权限的验证，当一个用户登录后权限的状态在此连接过程就被定下，即使是另一个用户修改了目前登录中的用户的权限等级，连接中的用户权限也不会被修改，直到下一次连接。连接过程中会产生大量的缓存数据，只有在断开连接后才会释放，可以通过执行mysql_reset_connection来初始化连接资源，这个过程不需要重连和重新做权限验证，但是会将连接恢复到刚刚创建完时的状态。

一条查询语句的执行过程一般是经过连接器、分析器、优化器、执行器等功能模块，最后到达存储引擎。